{"ast":null,"code":"import _slicedToArray from\"D:\\\\Real-Tic-Tac-Toe\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState,useCallback,useEffect}from\"react\";import useWebSocket,{ReadyState}from\"react-use-websocket\";import Fab from\"@mui/material/Fab\";import AccountCircleIcon from\"@mui/icons-material/AccountCircle\";import Volume from\"./Volume\";import HelpOutlineIcon from\"@mui/icons-material/HelpOutline\";import{useSelector,useDispatch}from\"react-redux\";import{setOpponent}from\"./ResultSlice\";import LogoutIcon from\"@mui/icons-material/Logout\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Result=function Result(){var username=localStorage.getItem(\"name\");var room=localStorage.getItem(\"room\");var _useState=useState(\"wss://api-tictactoe-by-sp.online/ws/seconduser/\"+room+\"/\"+username+\"/\"),_useState2=_slicedToArray(_useState,2),socketUrl=_useState2[0],setSocketUrl=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),icon=_useState4[0],setIcon=_useState4[1];var oppo=useSelector(function(state){return state.opponent.opponent;});// const [opponent, setOpponent] = useState(oppo);\nvar dispatch=useDispatch();var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),messageHistory=_useState6[0],setMessageHistory=_useState6[1];var _useWebSocket=useWebSocket(socketUrl),sendMessage=_useWebSocket.sendMessage,lastMessage=_useWebSocket.lastMessage,readyState=_useWebSocket.readyState;useEffect(function(){if(lastMessage!==null){setMessageHistory(function(prev){return prev.concat(lastMessage);});var bothClient=JSON.parse(lastMessage.data);if(localStorage.getItem(\"name\")===bothClient.first_client){// setOpponent(bothClient.second_client);\ndispatch(setOpponent(bothClient.second_client));setIcon(true);console.log(bothClient);}if(localStorage.getItem(\"name\")===bothClient.second_client){setOpponent(bothClient.first_client);dispatch(setOpponent(bothClient.first_client));setIcon(true);}if(bothClient.second_client==false){setOpponent(\"Opps !\");dispatch(setOpponent(\"Disconnected\"));setIcon(false);}}},[lastMessage,setMessageHistory]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ownProfile\",children:[/*#__PURE__*/_jsx(Fab,{onClick:function onClick(){window.location.reload();},children:/*#__PURE__*/_jsx(LogoutIcon,{fontSize:\"large\",style:{color:\"#3B3B98\"}})}),/*#__PURE__*/_jsx(\"h2\",{style:{color:\"white\"},children:\"Exit\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"volumeBar\",children:/*#__PURE__*/_jsx(Volume,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bothPlayer\",style:{backgroundColor:\"primary\"},children:[/*#__PURE__*/_jsx(\"p\",{className:\"room\",children:\"Room\"}),/*#__PURE__*/_jsx(\"p\",{className:\"roomcode\",children:localStorage.getItem(\"room\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"players\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"player1\",children:[/*#__PURE__*/_jsx(Fab,{children:/*#__PURE__*/_jsx(AccountCircleIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"You\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"vs\",children:\"Vs\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"player2\",children:[/*#__PURE__*/_jsx(Fab,{children:icon?/*#__PURE__*/_jsx(AccountCircleIcon,{fontSize:\"large\"}):/*#__PURE__*/_jsx(HelpOutlineIcon,{fontSize:\"large\",color:\"error\"})}),/*#__PURE__*/_jsx(\"p\",{children:oppo?oppo.toUpperCase():\"\"})]})]})]})]});};export default Result;","map":{"version":3,"sources":["D:/Real-Tic-Tac-Toe/client-application/src/features/game/Result.jsx"],"names":["React","useState","useCallback","useEffect","useWebSocket","ReadyState","Fab","AccountCircleIcon","Volume","HelpOutlineIcon","useSelector","useDispatch","setOpponent","LogoutIcon","Result","username","localStorage","getItem","room","socketUrl","setSocketUrl","icon","setIcon","oppo","state","opponent","dispatch","messageHistory","setMessageHistory","sendMessage","lastMessage","readyState","prev","concat","bothClient","JSON","parse","data","first_client","second_client","console","log","window","location","reload","color","backgroundColor","toUpperCase"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect } from \"react\";\r\nimport useWebSocket, { ReadyState } from \"react-use-websocket\";\r\nimport Fab from \"@mui/material/Fab\";\r\nimport AccountCircleIcon from \"@mui/icons-material/AccountCircle\";\r\nimport Volume from \"./Volume\";\r\nimport HelpOutlineIcon from \"@mui/icons-material/HelpOutline\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { setOpponent } from \"./ResultSlice\";\r\nimport LogoutIcon from \"@mui/icons-material/Logout\";\r\nconst Result = () => {\r\n\tvar username = localStorage.getItem(\"name\");\r\n\tvar room = localStorage.getItem(\"room\");\r\n\tconst [socketUrl, setSocketUrl] = useState(\r\n\t\t\"wss://api-tictactoe-by-sp.online/ws/seconduser/\" + room + \"/\" + username + \"/\"\r\n\t);\r\n\r\n\tconst [icon, setIcon] = useState(false);\r\n\tconst oppo = useSelector((state) => state.opponent.opponent);\r\n\t// const [opponent, setOpponent] = useState(oppo);\r\n\tconst dispatch = useDispatch();\r\n\tconst [messageHistory, setMessageHistory] = useState([]);\r\n\tconst { sendMessage, lastMessage, readyState } = useWebSocket(socketUrl);\r\n\tuseEffect(() => {\r\n\t\tif (lastMessage !== null) {\r\n\t\t\tsetMessageHistory((prev) => prev.concat(lastMessage));\r\n\t\t\tvar bothClient = JSON.parse(lastMessage.data);\r\n\t\t\tif (localStorage.getItem(\"name\") === bothClient.first_client) {\r\n\t\t\t\t// setOpponent(bothClient.second_client);\r\n\t\t\t\tdispatch(setOpponent(bothClient.second_client));\r\n\t\t\t\tsetIcon(true);\r\n\t\t\t\tconsole.log(bothClient);\r\n\t\t\t}\r\n\t\t\tif (localStorage.getItem(\"name\") === bothClient.second_client) {\r\n\t\t\t\tsetOpponent(bothClient.first_client);\r\n\t\t\t\tdispatch(setOpponent(bothClient.first_client));\r\n\t\t\t\tsetIcon(true);\r\n\t\t\t}\r\n\t\t\tif (bothClient.second_client == false) {\r\n\t\t\t\tsetOpponent(\"Opps !\");\r\n\t\t\t\tdispatch(setOpponent(\"Disconnected\"));\r\n\t\t\t\tsetIcon(false);\r\n\t\t\t}\r\n\t\t}\r\n\t}, [lastMessage, setMessageHistory]);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"ownProfile\">\r\n\t\t\t\t<Fab\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<LogoutIcon\r\n\t\t\t\t\t\tfontSize=\"large\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tcolor: \"#3B3B98\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Fab>\r\n\t\t\t\t<h2 style={{ color: \"white\" }}>Exit</h2>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"volumeBar\">\r\n\t\t\t\t<Volume />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"bothPlayer\" style={{ backgroundColor: \"primary\" }}>\r\n\t\t\t\t<p className=\"room\">Room</p>\r\n\t\t\t\t<p className=\"roomcode\">{localStorage.getItem(\"room\")}</p>\r\n\t\t\t\t<div className=\"players\">\r\n\t\t\t\t\t<div className=\"player1\">\r\n\t\t\t\t\t\t<Fab>\r\n\t\t\t\t\t\t\t<AccountCircleIcon fontSize=\"large\" />\r\n\t\t\t\t\t\t</Fab>\r\n\t\t\t\t\t\t<p>You</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p className=\"vs\">Vs</p>\r\n\t\t\t\t\t<div className=\"player2\">\r\n\t\t\t\t\t\t<Fab>\r\n\t\t\t\t\t\t\t{icon ? (\r\n\t\t\t\t\t\t\t\t<AccountCircleIcon fontSize=\"large\" />\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<HelpOutlineIcon fontSize=\"large\" color=\"error\" />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Fab>\r\n\t\t\t\t\t\t<p>{oppo ? oppo.toUpperCase() : \"\"}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\nexport default Result;\r\n"]},"metadata":{},"sourceType":"module"}